@page "/timeline"
@inject DatabaseService DB

<h3>📌 Timeline</h3>

<input class="form-control" placeholder="Search title/content..." @bind="q" />
<br />
<button class="btn btn-primary" @onclick="Search">Search</button>

<hr />

<div class="list-group">
    @foreach (var e in results)
    {
        <NavLink class="list-group-item list-group-item-action"
                 href="@($"/today?date={e.EntryDate:yyyy-MM-dd}")">
            <b>@e.EntryDate.ToString("yyyy-MM-dd")</b> — @e.Title
        </NavLink>
    }
</div>

@code {
    string q = "";
    List<MauiApp1.Models.JournalEntry> results = new();

    protected override async Task OnInitializedAsync()
        => results = await DB.SearchAsync("");

    async Task Search()
        => results = await DB.SearchAsync(q);
}
